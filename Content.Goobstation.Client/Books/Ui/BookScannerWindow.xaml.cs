using Content.Client.Message;
using Content.Client.UserInterface.Controls;
using Robust.Client.AutoGenerated;
using Robust.Client.UserInterface.XAML;

namespace Content.Goobstation.Client.Books.Ui;

[GenerateTypedNameReferences]
public sealed partial class BookScannerWindow : FancyWindow
{
    public Action? StartPressed;

    public BookScannerWindow()
    {
        RobustXamlLoader.Load(this);

        StartScanningButton.OnPressed += args => StartPressed?.Invoke();
    }

    public void Populate(string author, string genre, string title, string desc, bool cooldown)
    {
        StartScanningButton.Disabled = cooldown || author == "" || genre == "" || title == "";
        if (author != "")
            AuthorNameLabel.SetMarkup($"[font=Default size=18]Book author: {author}[/font]");
        else
            AuthorNameLabel.SetMessage(Loc.GetString("book-scanner-no-author"));

        if (genre != "")
            GenreLabel.SetMarkup($"[font=Default size=18]Book genre: {genre}[/font]");
        else
            GenreLabel.SetMessage(Loc.GetString("book-scanner-no-genre"));

        if (title != "")
            TitleLabel.SetMarkup($"[font=Default size=18]Book title: {title}[/font]");
        else
            TitleLabel.SetMessage(Loc.GetString("book-scanner-no-title"));

        if (desc != "")
            DescLabel.SetMarkup($"[font=Default size=18]{desc}[/font]");
        else
            DescLabel.SetMessage(Loc.GetString("book-scanner-no-desc"));
    }
}
