- type: entity
  id: BaseFenceMetalReinforced
  abstract: true
  name: reinforced fence
  description: A plasteel fence that is much harder to break. Ignores insulation when powered.
  placement:
    mode: SnapgridCenter
  components:
  - type: Clickable
  - type: Transform
    anchored: true
  - type: Physics
    bodyType: Static
  - type: MeleeSound
    soundGroups:
      Brute:
        path: "/Audio/Weapons/grille_hit.ogg"
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: Metallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 800
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Climbable
    delay: 30
    startClimbSound:
      collection: FenceRattle
    finishClimbSound:
      collection: FenceRattle

- type: entity
  id: BaseFenceMetalReinforcedVisual
  abstract: true
  parent: BaseFenceMetalReinforced
  components:
  - type: Sprite
    sprite: _Lavaland/Structures/Walls/reinforced_fence.rsi
    drawdepth: WallTops
  - type: Appearance

- type: entity
  id: BaseFenceMetalReinforcedElectrifiedAlwaysOn
  abstract: true
  components:
  - type: Electrified
    requirePower: false
    ignoreInsulation: true
    shockDamage: 40
    noWindowInTile: true
  - type: GenericVisualizer
    visuals:
      enum.ElectrifiedVisuals.ShowSparks:
        enum.ElectrifiedLayers.Sparks:
          True:  { visible: True }
          False: { visible: True }

- type: entity
  id: FenceMetalReinforcedStraight
  parent:
  - BaseFenceMetalReinforcedVisual
  - BaseFenceMetalReinforcedElectrifiedAlwaysOn
  components:
  - type: Sprite
    layers:
    - state: straight
    - state: electrified
      sprite: Effects/electricity.rsi
      map: ["enum.ElectrifiedLayers.Sparks"]
      shader: unshaded
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.10,-0.5,0.10,0.5"
        density: 2000
        mask: [ FullTileMask ]
        layer:
        - HighImpassable

- type: entity
  id: FenceMetalReinforcedCorner
  parent:
  - BaseFenceMetalReinforcedVisual
  - BaseFenceMetalReinforcedElectrifiedAlwaysOn
  suffix: Corner
  components:
  - type: Sprite
    layers:
    - state: corner
    - state: electrified
      sprite: Effects/electricity.rsi
      map: ["enum.ElectrifiedLayers.Sparks"]
      shader: unshaded
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.1,-0.1,0.1,0.5"
        density: 2000
        mask: [ TableMask ]
        layer: [ TableLayer ]
      fix2:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.5,-0.1,-0.1,0.1"
        density: 2000
        mask: [ TableMask ]
        layer:
        - MidImpassable
        - LowImpassable

- type: entity
  id: FenceMetalReinforcedGate
  parent: BaseFenceMetalReinforcedVisual
  name: reinforced fence gate
  components:
  - type: Sprite
    layers:
    - state: end
      map: ["enum.DoorVisualLayers.Base"]
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.5,-0.1,0.5,0.1"
        density: 2000
        mask: [ TableMask ]
        layer:
        - MidImpassable
        - LowImpassable
  - type: InteractionOutline
  - type: Door
    openSpriteState: door_opened
    closedSpriteState: door_closed
    canPry: false
    occludes: false
    changeAirtight: false
    bumpOpen: false
    clickOpen: true
    canCrush: false
    closeTimeOne: 0
    closeTimeTwo: 0
    openTimeOne: 0
    openTimeTwo: 0
    openingAnimationTime: 0
    closingAnimationTime: 0
