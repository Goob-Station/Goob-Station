- type: entity
  id: MobLegion
  parent: BaseMobAsteroid
  name: legion humanoid
  description: You can still see what was once a human under the shifting mass of corruption.
  components:
  - type: Sprite
    sprite: _Lavaland/Mobs/legion.rsi
    layers:
    - map: ["enum.DamageStateVisualLayers.Base"]
      state: legion
  - type: MobThresholds
    thresholds:
      0: Alive
      250: Dead
  - type: MeleeWeapon
    range: 1.3
    angle: 0
    attackRate: 0.5
    animation: WeaponArcPunch
    damage:
      types:
        Blunt: 20 # they don't even attack in melee because their AI is stupid right now
  - type: MovementSpeedModifier
    baseWalkSpeed: 2
    baseSprintSpeed: 2
  - type: Gun
    fireRate: 0.2
    selectedMode: SemiAuto
    showExamineText: false
    availableModes:
    - SemiAuto
    soundGunshot: null
  - type: RechargeBasicEntityAmmo
    showExamineText: false
    rechargeCooldown: 0
    rechargeSound: null
  - type: BasicEntityAmmoProvider
    proto: MobLegionSkull
    capacity: 1
    count: 1
  - type: NpcFactionMember
    factions:
    - Lavafauna
  - type: HTN
    rootTask:
      task: SimpleRangedHostileCompound
    blackboard:
      VisionRadius: !type:Single
        4
      AggroVisionRadius: !type:Single
        7
      NavSmash: !type:Bool
        true
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 150
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
      - !type:SpawnEntitiesBehavior
        spawn:
          MaterialBones1:
            min: 2
            max: 5
          MaterialLegionSkull1:
            min: 1
            max: 1
  - type: Fauna # Lavaland Change

- type: entity
  id: MobLegionSkull
  parent: [ BaseMobAsteroid, FlyingMobBase ]
  name: legion skull
  description: A fragment of the original legion, rallying behind its original. One isn't much of a threat, but...
  components:
  - type: Sprite
    sprite: _Lavaland/Mobs/legion.rsi
    layers:
    - map: ["enum.DamageStateVisualLayers.Base"]
      state: legion-skull
  - type: MovementSpeedModifier
    baseWalkSpeed : 3.5
    baseSprintSpeed : 4.0
  - type: MobThresholds
    thresholds:
      0: Alive
      5: Dead
  - type: MeleeWeapon
    angle: 0
    attackRate: 0.6
    range: 0.50
    animation: WeaponArcPunch
    damage:
      types:
        Blunt: 9 # Literally collides with you at full speed
  - type: Ammo
    muzzleFlash: null
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 5
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: NpcFactionMember
    factions:
    - Lavafauna
  - type: HTN
    rootTask:
      task: SimpleHostileCompound
    blackboard: # highly aggressive
      VisionRadius: !type:Single
        15
      AggroVisionRadius: !type:Single
        15
      NavSmash: !type:Bool
        true
  - type: TimedDespawn
    lifetime: 45
