- type: entity
  parent: [ BaseKnife, BaseSalvageContraband ]
  id: WeaponCrusherDagger
  name: kinetic dagger
  description: A scaled down version of a proto-kinetic crusher. Uses kinetic energy to vibrate the blade at high speeds.
  components:
  - type: Sprite
    sprite: Objects/Weapons/Melee/crusher_dagger.rsi
    state: icon
  - type: MeleeWeapon
    autoAttack: true
    animationRotation: -45 # WWDP
    wideAnimationRotation: -135
    attackRate: 1.5
    damage:
      types:
        Slash: 12
  - type: PressureDamageChange
    lowerBound: 0
    appliedModifier: 1.25
  - type: EmbeddableProjectile
    sound: /Audio/Weapons/star_hit.ogg
    offset: -0.15,0.0
  - type: LandAtCursor
  - type: DamageOtherOnHit
    damage:
      types:
        Slash: 18
  - type: DisarmMalus
    malus: 0.225
  - type: ThrowingAngle
    angle: 225
  - type: Fixtures
    fixtures:
      fix1:
        shape: !type:PolygonShape
          radius: 0.01
          vertices:
          - -0.4,-0.2
          - -0.2,-0.4
          - 0.4,0.2
          - 0.2,0.4
        density: 20 # derived from base_item
        mask:
        - ItemMask
        restitution: 0.3
        friction: 0.2
  - type: Sharp
  - type: Execution
    doAfterDuration: 4.0

- type: entity
  parent: [ BaseItem, ClothingHandsBase, BaseSalvageContraband ]
  id: LavalandWeaponKineticClaws
  name: kinetic claws
  description: Unleash your inner edgelord with this one-handed claw small enough to fit in your backpack.
  components:
  - type: Appearance
  - type: Sprite
    sprite: _Lavaland/Objects/Weapons/Secondary/kinetic_claws.rsi
    state: icon
  - type: Clothing
    sprite: _Lavaland/Objects/Weapons/Secondary/kinetic_claws-inhands.rsi
  - type: Item
    size: Normal
    sprite: _Lavaland/Objects/Weapons/Secondary/kinetic_claws-inhands.rsi
  - type: MeleeWeapon
    attackRate: 2.5 # "We have northstars at home"
    wideAnimationRotation: -135
    damage:
      types:
        Slash: 7
    soundHit:
      collection: AlienClaw
    angle: 30
    animation: WeaponArcClaw
    range: 1.1 # Awful range
    mustBeEquippedToUse: true
    heavyStaminaCost: 4 # No skill?
  - type: PressureDamageChange
    lowerBound: 0
    appliedModifier: 1.25
  - type: Sharp
  - type: Prying
  - type: UseDelay
    delay: 1
  - type: Fiber
    fiberMaterial: fibers-kinetic
    fiberColor: fibers-purple
  - type: Execution
    doAfterDuration: 4.0
  - type: Tool
    qualities:
    - Slicing
    useSound:
      path: /Audio/Items/Culinary/chop.ogg
  - type: Scalpel # Shitmed
    speed: 0.3 # awful

- type: entity
  parent: [ BaseItem, BaseSalvageContraband ]
  id: LavalandWeaponKineticMachete
  name: kinetic machete
  description: A smaller, one-handed variant of the crusher which allows you to attack from afar and block incoming attacks.
  components:
  - type: Sprite
    sprite: _Lavaland/Objects/Weapons/Secondary/kinetic_machete.rsi
    state: icon
  - type: UseDelay
    delay: 1
  - type: Appearance
  - type: Sharp
  - type: Execution
    doAfterDuration: 4.0
  - type: DisarmMalus
  - type: Prying
  - type: MeleeWeapon
    attackRate: 1.0
    damage:
      types:
        Slash: 15
    soundHit:
      collection: MetalThud
    angle: 0
    animation: WeaponArcThrust
    range: 2 # Like a crusher, makes it possible to hit enemies without them hitting you
  # TODO make it wearable on a belt/back slot
  - type: PressureDamageChange
    lowerBound: 0
    appliedModifier: 1.25
  - type: Item
    size: Normal
    sprite: _Lavaland/Objects/Weapons/Secondary/kinetic_machete-inhands.rsi
  - type: BlockCharge # TODO fix this component and turn it into a complete parrying mechanic
    rechargeTime: 120
    markerReductionTime: 20
  - type: Tool
    qualities:
    - Slicing
    useSound:
      path: /Audio/Items/Culinary/chop.ogg
  - type: Scalpel # Shitmed
    speed: 0.55

# Entity tables
- type: entityTable
  id: SecondaryKineticWeapons
  table: !type:GroupSelector
    children:
    - id: WeaponCrusherDagger
    - id: LavalandWeaponKineticClaws
    - id: LavalandWeaponKineticMachete
