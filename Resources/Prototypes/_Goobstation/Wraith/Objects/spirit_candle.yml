- type: entity
  name: spirit candle
  parent: Candle
  id: Spirit Candle
  components:
  - type: Item
    size: Tiny
  - type: Sprite
    layers:
    - state: candle-small
      color: "#e2ca90"
  - type: SpiritCandle
  - type: LimitedCharges
    maxCharges: 2
  - type: UseDelay
    delay: 15 # as long as the status effects last
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 60
      behaviors:
      - !type:SpawnEntitiesBehavior
      - !type:DoActsBehavior
        acts: [ "Destruction" ]

# dummy entity for detecting
- type: entity
  id: SpiritCandleRevealArea
  name: spirit candle area
  description: You shouldn't see this.
  components:
  - type: SpiritCandleArea
    whitelist:
      components:
      - Wraith
  - type: Transform
    anchored: false
  - type: Physics
    bodyType: Static
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-6, -6, 6, 6" # 12x12 tile area
        density: 1
        hard: false
        mask:
        - GhostImpassable
