- type: entity
  name: machete
  parent: [ BaseSword, BaseMajorContraband ]
  id: SlasherMachete
  description: A large, vicious looking blade.
  components:
  - type: Tag
    tags:
    - Machete
  - type: Sprite
    sprite: _Goobstation/Objects/Specific/Slasher/machete.rsi
  - type: MeleeWeapon
    damage:
      types:
        Slash: 15
    soundHit:
      path: /Audio/Weapons/bladeslice.ogg
  - type: Item
    storedSprite:
      state: storage
      sprite: _Goobstation/Objects/Specific/Slasher/machete.rsi
    shape:
    - 0,0,0,2
  - type: DisarmMalus
#  - type: MeleeThrowOnHit # check later
#    stunTime: 1.5 # stunned on throw
#    activateOnThrown: true
#    distance: 0 # no throw impulse to victim, only stun
#    speed: 0
  - type: SlasherMassacreMachete


- type: entity
  parent: WeldingMaskBase
  id: ClothingHeadHatSlasherMask
  name: slasher mask
  description: A head-mounted face cover designed to protect the wearer completely from space-arc eye.
  components:
  - type: Sprite
    sprite: _Goobstation/Objects/Specific/Slasher/mask.rsi
  - type: Clothing
    sprite: _Goobstation/Objects/Specific/Slasher/mask.rsi
    clothingVisuals:
      head:
      - state: equipped-HELMET
  - type: Tag
    tags:
    - WhitelistChameleon
    - WeldingMask

- type: entity
  parent: ClothingOuterStorageBase
  id: ClothingOuterSlasherApron
  name: slasher apron
  description: A fancy apron for a stylish person.
  components:
  - type: Sprite
    sprite: _Goobstation/Objects/Specific/Slasher/apron.rsi
  - type: Clothing
    sprite: _Goobstation/Objects/Specific/Slasher/apron.rsi
    clothingVisuals:
      outerClothing:
      - state: equipped-OUTERCLOTHING
  - type: Tag
    tags:
    - Apron
    - WhitelistChameleon

- type: entity
  parent: BaseGameRule
  id: SlasherSpawn
  components:
  - type: StationEvent
    weight: 3
    duration: null
    earliestStart: 30
    maxOccurrences: 1
    minimumPlayers: 30
    chaos:
      Hostile: 40
      Combat: 40
      Death: 40
    eventType: HostilesSpawn
  - type: GameRule
    chaosScore: 400
  - type: AntagRandomSpawn
  - type: AntagLoadProfileRule
    speciesOverride: Human
    speciesOverrideBlacklist:
    - Yowie
    - IPC
    - Diona
    - Harpy
    - Plasmaman
  - type: AntagObjectives
    objectives:
    - StealResearchObjective # Change later
  - type: AntagSelection
    agentName: slasher-round-end-agent-name # Change later
    definitions:
    - spawnerPrototype: SpawnPointGhostSlasher
      min: 1
      max: 1
      pickPlayer: false
      startingGear: SlasherGear
      roleLoadout:
      - RoleSurvivalEVA
      briefing:
        text: slasher-role-greeting
        color: Red
        sound: /Audio/_Goobstation/Effects/Slasher/Slasherintro.ogg
      components:
      - type: Slasher
      - type: AutoImplant
        implants:
        - DeathAcidifierImplant
      - type: RandomMetadata
        nameSegments:
        - NamesSlasherTitle
        - NamesSlasher
        nameFormat: name-format-slasher
      mindRoles:
      - MindRoleSlasher

- type: entity
  id: SlasherMeatSpike
  parent: BaseStructure
  name: Ominous Meat Spike
  description: You might want to run.
  components:
  - type: InteractionOutline
  - type: Sprite
    sprite: Structures/meat_spike.rsi
    state: spike
    layers:
    - state: spike
      map: ["base"]
  - type: Damageable
    damageContainer: StructuralInorganic
    damageModifierSet: Metallic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 200
      behaviors:
        - !type:DoActsBehavior
          acts: [ "Destruction" ]
    - trigger:
        !type:DamageTrigger
        damage: 100
      behaviors:
      - !type:DoActsBehavior
        acts: ["Destruction"]
      - !type:PlaySoundBehavior
        sound:
          collection: MetalBreak
          params:
            volume: -4
      - !type:SpawnEntitiesBehavior
        spawn:
          SheetSteel1:
            min: 1
            max: 1
  - type: Anchorable
  - type: Pullable
  - type: Appearance
  - type: BlockHandsOnBuckle
  - type: Strap
    position: Down
    rotation: -180
    selfUnBuckleDelay: 60
    blacklist:
      components:
        - Slasher # no lmao
  - type: Transform
    anchored: true
    noRot: true
  - type: AntiRotOnBuckle
  - type: Fixtures
    fixtures:
      spike:
        shape: !type:PhysShapeAabb { bounds: "-0.25,-0.25,0.25,0.25" }
        density: 5
        mask: [] # No collision mask so entities can walk through
        layer: []

