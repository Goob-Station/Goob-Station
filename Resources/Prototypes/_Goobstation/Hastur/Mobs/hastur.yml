- type: entity
  name: ????
  parent: [ SimpleSpaceMobBase, MobCombat ]
  id: MobHastur
  description: He who must not be named...
  components:
    - type: Hastur
    - type: Omnipresence
      cloneDistance: 3.5
      stunRange: 2.5
      stunDuration: 4.0
      cloneLifetime: 5.0
    - type: InsanityAura
      reagents:
        SpaceDrugs: 50
      range: 12
    - type: HasturDevour
    - type: HasturLash
    - type: HasturVeil
    - type: MassWhisper
    - type: ActionGrant
      actions:
      - ActionHasturDevour
      - ActionInsanityAura
      - ActionMassWhisper
      - ActionVeilOfTheVoid
      - ActionOmnipresence
      - ActionHasturLash
      - ActionHasturClone
    - type: HTN
      rootTask:
        task: SimpleHostileCompound
    - type: NpcFactionMember
      factions:
        - SimpleHostile
    - type: MovementSpeedModifier
      baseWalkSpeed: 4
      baseSprintSpeed: 4
    - type: Sprite
      sprite: _Goobstation/Hastur/hastur.rsi
      layers:
      - map: ["enum.DamageStateVisualLayers.Base", "movement"]
        state: hastur
    - type: SpriteMovement
      movementLayers:
        movement:
          state: hasturM
      noMovementLayers:
        movement:
          state: hastur
    - type: Physics
      bodyType: KinematicController
    - type: Fixtures
      fixtures:
        fix1:
          shape:
            !type:PhysShapeCircle
            radius: 0.40
          density: 100
          mask:
            - LargeMobMask
          layer:
            - LargeMobLayer
    - type: MobThresholds
      thresholds:
        0: Alive
        650: Dead
    - type: StaticPrice
      price: 30000
    - type: TileMovement
    - type: MeleeWeapon
      soundHit:
        path: /Audio/_Goobstation/Misc/Hastur/tentacle_hit.ogg
      damage:
        types:
          Piercing: 20
          Slash: 15
    - type: PassiveDamage # Mild passive regenation, with the exception of poison and genetic, which cannot be used effectively against it.
      allowedStates:
        - Alive
        - Critical
        - Dead
      damageCap: 0
      damage:
        groups:
          Brute: -1
          Burn: -1
          Toxin: -5
          Genetic: -5
    - type: WeakToHoly
      alwaysTakeHoly: true
    - type: NoSlip
    - type: Bloodstream
      bloodMaxVolume: 300
      bloodReagent: Haloperidol
    - type: FootstepModifier
      footstepSoundCollection:
        collection: TentacleWalk
    - type: Puller
      needsHands: false
    - type: Speech
      speechVerb: HolierThanThou
      speechSounds: Hastur
    - type: Tag
      tags:
      - DoorBumpOpener
      - FootstepSound
    - type: Megafauna
      loot: ClothingOuterHasturRobes
    - type: Sprinter
    - type: CombatPower
      factor: 10 # times more dangerous than a crew-member

- type: entity
  name: ????
  parent: SimpleSpaceMobBase 
  id: MobHasturClone
  suffix: DO NOT MAP
  description: He who must not be named...
  components:
    - type: Sprite
      sprite: _Goobstation/Hastur/hastur.rsi
      layers:
      - map: ["enum.DamageStateVisualLayers.Base", "movement"]
        state: hastur
    - type: SpriteMovement
      movementLayers:
        movement:
          state: hasturM
      noMovementLayers:
        movement:
          state: hastur
    - type: FadingTimedDespawn
      lifetime: 8
      fadeOutTime: 4
    - type: EmitSoundOnSpawn
      sound:
        path: /Audio/_Goobstation/Misc/Hastur/growl.ogg
        params:
          volume: 1
          maxDistance: 10
          variation: 0.3
