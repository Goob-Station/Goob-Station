# SPDX-FileCopyrightText: 2025 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 2025 Solstice <solsticeofthewinter@gmail.com>
# SPDX-FileCopyrightText: 2025 SolsticeOfTheWinter <solsticeofthewinter@gmail.com>
#
# SPDX-License-Identifier: AGPL-3.0-or-later

# Devil Specific

- type: entity
  parent: BaseMentalAction
  id: ActionDevilOpenShop
  name: Soul store
  description: Use the souls contracted to you to regain the power that you lost.
  components:
  - type: Action
    icon: Interface/Actions/shop.png
  - type: InstantAction
    event: !type:DevilOpenStoreEvent

- type: entity
  parent: BaseAction
  id: ActionCreateContract
  name: Summon infernal contract
  description: Creates an infernal contract in the Devil's hand.
  categories: [ HideSpawnMenu ]
  components:
  - type: Action
    useDelay: 10
    itemIconStyle: NoItem
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: summon-contract
  - type: InstantAction
    event: !type:CreateContractEvent {}

- type: entity
  parent: BaseAction
  id: ActionCreateRevivalContract
  name: Summon revival contract
  description: Creates a revival contract in the Devil's hand.
  categories: [ HideSpawnMenu ]
  components:
  - type: Action
    useDelay: 30
    itemIconStyle: NoItem
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: summon-contract-revival
  - type: InstantAction
    event: !type:CreateRevivalContractEvent {}

- type: entity
  parent: BaseAction
  id: ActionShadowJaunt
  name: Shadow jaunt
  description: Melt into the shadows.
  categories: [ HideSpawnMenu ]
  components:
  - type: Action
    useDelay: 40 # Stop running you cowardly fucks.
    itemIconStyle: NoItem
    checkCanInteract: false
    checkConsciousness: false
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: shadow-jaunt
  - type: InstantAction
    event: !type:ShadowJauntEvent {}

- type: entity
  parent: BaseAction
  id: ActionDevilPossess
  name: Possess target
  description: Temporarily possess a target.
  categories: [ HideSpawnMenu ]
  components:
  - type: Action
    useDelay: 70
    itemIconStyle: NoItem
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: possess
  - type: TargetAction
    interactOnMiss: false
  - type: EntityTargetAction
    canTargetSelf: false
    whitelist:
      components:
      - Body
    event: !type:DevilPossessionEvent {}

- type: entity
  parent: BaseAction
  id: ActionEndPossession
  name: End possession
  description: Cancel this possession early.
  categories: [ HideSpawnMenu ]
  components:
  - type: Action
    itemIconStyle: NoItem
    checkCanInteract: false
    checkConsciousness: false
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: possess
  - type: InstantAction
    event: !type:EndPossessionEarlyEvent {}

- type: entity
  parent: BaseAction
  id: ActionDevilGrip
  name: Devil's Grip
  description: What little fraction of your power remains in this realm, channeled into your hands.
  categories: [ HideSpawnMenu ]
  components:
  - type: Action
    itemIconStyle: NoItem
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: devil-grip
  - type: InstantAction
    event: !type:DevilGripEvent {}

# Deals

- type: entity
  parent: BaseAction
  id: ActionCheatDeath
  name: Cheat Death
  description: Laugh in the Grim Reapers face. You've still got time.
  categories: [ HideSpawnMenu ]
  components:
  - type: Action
    itemIconStyle: NoItem
    useDelay: 250
    checkCanInteract: false
    checkConsciousness: false
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: cheat-death
  - type: InstantAction
    event: !type:CheatDeathEvent {}

# Shop

- type: entity
  id: ActionDevilSummonPitchfork
  name: Summon pitchfork
  description: Summons a stick to poke people with. Dissapears after a short period.
  components:
  - type: Action
    raiseOnUser: true
    useDelay: 20
    itemIconStyle: BigAction
    icon: { sprite: _Goobstation/Actions/devil.rsi, state: pitchfork }
  - type: InstantAction
    event: !type:DevilSummonPitchforkEvent

- type: entity
  parent: BaseAction
  id: ActionHellFire
  name: Hellfire
  description: This spell launches hellfire at the target. Causes a small explosion and sets living creatures ablaze.
  components:
  - type: Action
    useDelay: 180
    itemIconStyle: BigAction
    raiseOnUser: true
    sound: !type:SoundPathSpecifier
      path: /Audio/_Goobstation/Weapons/Guns/Gunshots/plasma_cutter.ogg
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: hellfire
  - type: TargetAction
    range: 60
    checkCanAccess: false
  - type: EntityTargetAction
    canTargetSelf: false
  - type: WorldTargetAction
    event: !type:ProjectileSpellEvent
      prototype: ProjectileHellfire
      speed: 20

- type: entity
  id: ActionDevilHellstep
  name: Hellstep
  description: Creates a trail of fire where your metaphysical tail meets the ground.
  components:
  - type: Action
    raiseOnUser: true
    useDelay: 90
    itemIconStyle: BigAction
    icon: { sprite: _Goobstation/Actions/devil.rsi, state: hellstep }
  - type: InstantAction
    event: !type:DevilHellstepEvent

- type: entity
  id: ActionSmallFavor
  name: Small favor
  description: As a small favor, bring a lesser slaughter demon from Hell for two minutes.
  components:
  - type: Action
    itemIconStyle: BigAction
    sound: !type:SoundPathSpecifier
      path: /Audio/_Goobstation/Wraith/Mobs/ghostbreath.ogg
    useDelay: 1200
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: smallfavor
  - type: TargetAction
    range: 2
  - type: WorldTargetAction
    event: !type:WorldSpawnSpellEvent
      prototypes:
      - id: SlaughterDemonTimedMidround
        amount: 1
      offset: 0, 1

- type: entity
  id: ActionDevilHeresy
  name: Heresy
  description: Draw a rune below your feet to heal any unholy damage taken over time.
  components:
  - type: Action
    itemIconStyle: NoItem
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: heresy
  - type: InstantAction
    event: !type:DevilHeresyEvent

- type: entity
  id: ActionDevilAuthority
  name: Authority
  description: Exert your authority over lesser demons, bringing all currently alive slaughter demons to you. In the process, creates a large pool of blood and stuns any mortals nearby for a short duration.
  components:
  - type: Action
    itemIconStyle: NoItem
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: authority
  - type: InstantAction
    event: !type:DevilAuthorityEvent

# Greater forms

- type: entity
  parent: BaseActionPolymorph
  id: ActionPolymorphLesserDevil
  name: Ascend to lesser form
  description: Return to your lesser form, only a fragment of your true power, and a necessary step towards becoming an Archdevil. Regains your capability to do harm, but loses on the ability to jaunt into the shadows. This cannot be undone. Collect enough souls in this form to unlock the next stage.
  components:
  - type: Action
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: lesserform
  - type: InstantAction
    event: !type:BecomeLesserDevilEvent

- type: entity
  parent: BaseActionPolymorph
  id: ActionPolymorphArchDevil
  name: Ascend to Archdevil
  description: Return to your true form, at last. Most of your actions will become empowered while in Archdevil form.
  components:
  - type: Action
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: archdevil
  - type: InstantAction
    event: !type:BecomeArchdevilEvent

- type: entity
  parent: BaseAction
  id: ActionHellFireArch
  name: Archdevil's breath
  description: Exhale hellfire towards a target, exploding everything in its path.
  components:
  - type: Action
    useDelay: 20
    itemIconStyle: BigAction
    raiseOnUser: true
    sound: !type:SoundPathSpecifier
      path: /Audio/_Goobstation/Weapons/Guns/Gunshots/plasma_cutter.ogg
    icon:
      sprite: _Goobstation/Actions/devil.rsi
      state: archfire
  - type: TargetAction
    range: 60
    checkCanAccess: false
  - type: EntityTargetAction
    canTargetSelf: false
  - type: WorldTargetAction
    event: !type:ProjectileSpellEvent
      prototype: ProjectileHellfireArch
      speed: 12
