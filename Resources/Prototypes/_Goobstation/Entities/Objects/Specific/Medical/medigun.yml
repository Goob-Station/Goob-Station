# SPDX-FileCopyrightText: 2025 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 2025 Roudenn <romabond091@gmail.com>
#
# SPDX-License-Identifier: AGPL-3.0-or-later

- type: entity
  parent: BaseItem
  id: MedicalBeamGun
  name: medical beam gun
  description: Delivers volatile medical nanites in a focused beam. Uber mode heals the patient much more powerfully, but makes them suffocate. Don't cross the beams! Recharges in 60 or 90 seconds.
  suffix: Unlimited
  components:
  - type: Sprite
    sprite: _Goobstation/Objects/Specific/Medical/medigun.rsi
    layers:
    - state: icon
    - state: active_gun
      map: [ "enum.ToggleableVisuals.Layer" ]
      visible: false
  - type: Item
    sprite: _Goobstation/Objects/Specific/Medical/medigun.rsi
    size: Large
  - type: MediGun
    healing:
      types:
        Blunt: -2
        Slash: -2
        Piercing: -2
        Heat: -2
        Cold: -1
    uberHealing:
      types:
        Blunt: -4
        Slash: -4
        Piercing: -4
        Heat: -4
        Cold: -3
        Shock: -3
        Caustic: -2
        Ion: -3
        Bloodloss: -4
        Asphyxiation: 3
    soundOnTarget:
      path: /Audio/_Goobstation/Weapons/Effects/energy_reload.ogg
      params:
        volume: 6
  - type: ItemToggle
    predictable: false
    soundActivate:
      path: /Audio/_Goobstation/Weapons/Effects/energy_alarm.ogg
      params:
        volume: 6
    soundDeactivate:
      path: /Audio/_Goobstation/Weapons/Effects/energy_error.ogg
      params:
        volume: 6
    soundFailToActivate:
      path: /Audio/_Goobstation/Weapons/Effects/energy_error.ogg
      params:
        volume: 6
  - type: UseDelay
    delay: 1.5
  # Visuals
  - type: Appearance
  - type: GenericVisualizer
    visuals:
      enum.ToggleableVisuals.Enabled:
        enum.ToggleableVisuals.Layer:
          True: { visible: true}
          False: { visible: false}

- type: entity
  parent: MedicalBeamGun
  id: MedicalBeamGunBattery
  suffix: Battery
  components:
  - type: Battery
    maxCharge: 20
    startingCharge: 20
  - type: RechargeableBlocking
    chargedRechargeRate: 20
    dischargedRechargeRate: 20
  - type: BatterySelfRecharger
    autoRecharge: true
    autoRechargeRate: 20
    autoRechargePause: true
    autoRechargePauseTime: 60

- type: entity
  parent: [ MedicalBeamGun, BaseSyndicateContraband ]
  id: MedicalBeamGunSyndicate
  name: syndicate medical beam gun
  suffix: Syndicate, Unlimited
  components:
  - type: Sprite
    sprite: _Goobstation/Objects/Specific/Medical/syndicate_medigun.rsi
  - type: Item
    sprite: _Goobstation/Objects/Specific/Medical/syndicate_medigun.rsi
    size: Normal
  - type: MediGun
    healing:
      types:
        Blunt: -2.5
        Slash: -2.5
        Piercing: -2.5
        Heat: -2.5
        Cold: -1.5
    uberHealing:
      types:
        Blunt: -6
        Slash: -6
        Piercing: -6
        Heat: -6
        Cold: -4
        Shock: -4
        Caustic: -3
        Ion: -4
        Bloodloss: -4
        Asphyxiation: 4

- type: entity
  parent: MedicalBeamGunSyndicate
  id: MedicalBeamGunSyndicateBattery
  suffix: Battery, Syndicate
  components:
  # Less overall battery, faster recharging
  - type: Battery
    maxCharge: 15
    startingCharge: 15
  - type: RechargeableBlocking
    chargedRechargeRate: 15
    dischargedRechargeRate: 15
  - type: BatterySelfRecharger
    autoRecharge: true
    autoRechargeRate: 15
    autoRechargePause: true
    autoRechargePauseTime: 90
