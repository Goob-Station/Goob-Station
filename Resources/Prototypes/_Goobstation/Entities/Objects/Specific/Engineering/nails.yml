# SPDX-FileCopyrightText: 2025 BombasterDS <deniskaporoshok@gmail.com>
# SPDX-FileCopyrightText: 2025 GMWQ <garethquaile@gmail.com>
# SPDX-FileCopyrightText: 2025 Gareth Quaile <garethquaile@gmail.com>
# SPDX-FileCopyrightText: 2025 GoobBot <uristmchands@proton.me>
# SPDX-FileCopyrightText: 2025 Ted Lukin <66275205+pheenty@users.noreply.github.com>
# SPDX-FileCopyrightText: 2025 pheenty <fedorlukin2006@gmail.com>
#
# SPDX-License-Identifier: AGPL-3.0-or-later

- type: entity
  name: nail
  parent: BaseItem
  description: A tiny metal stick. It is probably used to fix walls together with a hammer.
  id: Nail
  components:
  - type: Sprite
    sprite: _Goobstation/Objects/Specific/Engineering/nail.rsi
    state: icon
  - type: Item
    size: Tiny
  - type: Projectile
    deleteOnCollide: false
    onlyCollideWhenShot: true
    damage:
      types:
        Piercing: 2
  - type: Reflective
    reflective:
    - NonEnergy
  - type: EmbeddableProjectile
    offset: "0, 0.2"
    minimumSpeed: 1
    removalTime: 0.1
    embedOnThrow: true
    sound: /Audio/Weapons/pierce.ogg
  - type: Fixtures
    fixtures:
      fix1:
        shape: !type:PhysShapeCircle
          radius: 0.1
        density: 5
        mask:
        - ItemMask
        restitution: 0.3
        friction: 0.2
      projectile:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.1,-0.2,0.1,0.2"
        hard: false
        mask:
        - Impassable
        - BulletImpassable
  - type: ThrowingAngle
    angle: 0
  - type: Ammo
    muzzleFlash: null
  - type: Nail
    damage:
      types:
        Piercing: 10
      armorPenetration: -0.25
    damageToWhitelisted:
      types:
        Blunt: -10
        Slash: -10
        Piercing: -10
        Heat: -10
        Shock: -10
        Structural: -10
    whitelist:
      tags:
      - Wall
  - type: ProjectileForceTarget # 1984
    part: Chest
  - type: Tag
    tags:
    - Nail
    - Trash

- type: entity
  name: nail (armor-piercing)
  parent: [ Nail, BaseSyndicateContraband ]
  description: A heavy nail designed to pierce through hard surfaces. Looks just like a regular nail, until it suddenly kills you.
  id: NailArmorPiercing
  components:
  - type: Nail
    damage:
      types:
        Piercing: 8
      armorPenetration: 0.75
    damageToWhitelisted:
      types:
        Blunt: -6
        Slash: -6
        Piercing: -6
        Heat: -6
        Shock: -6
        Structural: -6
    autoHammerIntoNonWhitelisted: true

- type: entity
  parent: BaseItem
  id: MagazineBoxNail
  name: nail box
  components:
  - type: BallisticAmmoProvider
    mayTransfer: true
    whitelist:
      tags:
      - Nail
    proto: Nail
    capacity: 60
  - type: ContainerContainer
    containers:
      ballistic-ammo: !type:Container
  - type: Sprite
    sprite: _Goobstation/Objects/Specific/Engineering/nail_box.rsi
    state: icon

- type: entity
  parent: [ MagazineBoxNail, BaseSyndicateContraband ]
  id: MagazineBoxNailArmorPiercing
  name: nail box (armor-piercing)
  components:
  - type: BallisticAmmoProvider
    proto: NailArmorPiercing
