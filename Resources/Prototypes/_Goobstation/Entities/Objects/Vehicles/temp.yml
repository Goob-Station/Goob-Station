- type: entity
  id: ActionThankDriver
  name: Thank Driver
  description: show the driver you enjoy beeing a passanger
  components:
  - type: InstantAction
    itemIconStyle: NoItem
    icon:
      sprite: Objects/Fun/bikehorn.rsi
      state: icon
    event: !type:ThankRiderActionEvent
    useDelay: 60

- type: entity
  id: ActionCanonmode
  name: activate canon
  description: FIRE THE URSA CLAWS!!
  components:
  - type: InstantAction
    itemIconStyle: NoItem
    icon:
      sprite: Objects/Fun/bikehorn.rsi
      state: icon
    event: !type:ClowncarFireModeActionEvent
    useDelay: 2

- type: entity
  parent: BaseVehicle
  id: TestlowncarBase
  name: testclowncar
  components:

  - type: Sprite
    sprite: Objects/Vehicles/clowncar.rsi
    layers:
      - state: clowncar
        map: ["enum.ClowncarLayers.Base"]
    netsync: false
    noRot: true

  - type: Vehicle
    renderOver: North, NorthEast, East, SouthEast, South, SouthWest, West, NorthWest
    requiredHands: 1
    hornSound:
      collection: BikeHorn
      params:
        variation: 0.125

  - type: MovementSpeedModifier
    weightlessModifier: 0
    acceleration: 1
    friction: 1
    baseWalkSpeed: 4.5
    baseSprintSpeed: 7

  - type: ItemSlots
    slots:
      key_slot:
        name: vehicle-slot-component-slot-name-keys
        whitelist:
          requireAll: true
          tags:
          - VehicleKey
          - BikeHorn
        insertSound:
          path: /Audio/Effects/Vehicle/vehiclestartup.ogg
          params:
            volume: -3

  - type: Strap
    maxBuckleDistance: 1
    unbuckleSound:
      collection: ClowncarCrash
  #  whitelist:
  #    components:
  #    - Clumsy

  - type: UnpoweredFlashlight
  - type: PointLight
    enabled: false
    mask: /Textures/Effects/LightMasks/cone.png
    autoRot: true
    radius: 3.5
    softness: 2
    netsync: false

  - type: ContainerContainer
    containers:
      clowncar_container: !type:Container

  - type: ExtendedContainer
    containerName: clowncar_container
    capacity: 6
    insertSound:
      collection: ClowncarLoad
      params:
        volume: 4
    removeSound:
      collection: ClowncarCrash

  - type: DragInsertContainer
    containerId: clowncar_container
    delay: 2
    useVerbs: false

  - type: InsertToContainerOnCollide
    container: clowncar_container
    requiredVelocity: 3
    insertableEntities:
      components:
        - HumanoidAppearance
    blacklistedEntities:
      components:
        - KnockedDown

  - type: RemoveFromContainerOnCollide
    container: clowncar_container
    requiredVelocity: 3
    removeEverything: true
    collidableEntities:
      components:
        - HumanoidAppearance
        - KnockedDown
        - Item
        - SlowContacts
        - Puddle
        - Airlock
        - Door
        - Strap
        - Body

  - type: Clowncar
    cannonActivateSound:
      path: "/Audio/Effects/Vehicle/Clowncar/clowncar_activate_cannon.ogg"
      params:
        volume: 5
    cannonDeactivateSound:
      path: "/Audio/Effects/Vehicle/Clowncar/clowncar_deactivate_cannon.ogg"
      params:
        volume: 5


- type: entity
  id: ClowncarCannon
  noSpawn: true
  categories: [ HideSpawnMenu ]
  components:
  - type: Sprite
    sprite: Objects/Weapons/Guns/Launchers/pirate_cannon.rsi
    layers:
      - state: icon
  - type: Physics
    bodyType: Dynamic
  - type: Item
  - type: Gun
    fireRate: 1
    selectedMode: SemiAuto
    availableModes:
      - SemiAuto
      - FullAuto
    soundGunshot:
      collection: ClowncarCannonFire
    soundEmpty:
      path: /Audio/Items/hiss.ogg
  - type: ContainerAmmoProvider
    container: clowncar_container
  - type: Unremoveable
  - type: ClowncarCannon
