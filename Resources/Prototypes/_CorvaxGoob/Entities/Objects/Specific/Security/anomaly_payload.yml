- type: entity
  parent: BaseItem
  id: AnomalyPayloadEmpty
  name: anomaly core payload charge
  description: Contains the core of the anomaly. When activated, the charge produces an anomaly pulse.
  suffix: Empty
  components:
  - type: Appearance
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    state: anomaly-payload-empty
  - type: Damageable
    damageContainer: Inorganic
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Tag
    tags:
    - AnomalyPayload

- type: entity
  parent: BaseItem
  id: BaseAnomalyPayload
  name: anomaly core payload charge
  description: Contains the core of the anomaly. When activated, the charge produces an anomaly pulse.
  abstract: true
  components:
  - type: ContainerContainer
    containers:
      anomaly-core: !type:ContainerSlot {}
  - type: Appearance
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
  - type: Damageable
    damageContainer: Inorganic
  - type: UseDelay
    delay: 60
  - type: EmitSoundOnTrigger
    sound:
      collection: RadiationPulse
  - type: Destructible
    thresholds:
    - trigger:
        !type:DamageTrigger
        damage: 50
      behaviors:
      - !type:DoActsBehavior
        acts: [ "Destruction" ]
  - type: Tag
    tags:
    - Payload

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadElectro
  suffix: Electricity
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCoreElectricityInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#fffb01"
    - state: anomaly-payload
      color: "#fffb01"
  - type: EmpOnTrigger

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadGravity
  suffix: Gravity
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCoreGravityInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#1f1f1f"
    - state: anomaly-payload
      color: "#1f1f1f"
  - type: SpawnOnTrigger
    proto: EffectWhitehole
  - type: UseDelay
    delay: 450

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadShadow
  suffix: Shadow
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCoreShadowInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#30005e"
    - state: anomaly-payload
      color: "#30005e"
  - type: SmokeOnTrigger
    duration: 10
    spreadAmount: 30
  - type: UseDelay
    delay: 80

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadFlora
  suffix: Flora
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCoreFloraInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#27e900"
    - state: anomaly-payload
      color: "#27e900"
  - type: EntitySpawnInRangeOnTrigger
    entries:
    - settings:
        minAmount: 5
        maxAmount: 15
        maxRange: 2
      spawns:
      - KudzuFlowerFriendly
  - type: UseDelay
    delay: 80

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadRock
  suffix: Rock
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCoreRockInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#361100"
    - state: anomaly-payload
      color: "#361100"
  - type: EntitySpawnInRangeOnTrigger
    entries:
    - settings:
        minAmount: 7
        maxAmount: 20
        maxRange: 7
      spawns:
      - CrystalGreen
      - CrystalYellow
      - CrystalGrey
      - CrystalCyan
      - WallSpawnAsteroid
      - WallSpawnAsteroid
      - WallSpawnAsteroid
      - WallSpawnAsteroid
      - WallSpawnAsteroid
      - WallSpawnAsteroidUranium
      - WallSpawnAsteroidUraniumCrab
      - WallSpawnAsteroidBananium
      - WallSpawnAsteroidBananiumCrab
      - WallSpawnAsteroidQuartz
      - WallSpawnAsteroidQuartzCrab
      - WallSpawnAsteroidSilver
      - WallSpawnAsteroidSilverCrab
      - WallSpawnAsteroidGold
      - WallSpawnAsteroidGoldCrab
      - WallSpawnAsteroidIron
      - WallSpawnAsteroidIronCrab
      - WallSpawnAsteroidCoal
      - WallSpawnAsteroidCoalCrab
  - type: UseDelay
    delay: 160

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadFlesh
  suffix: Flesh
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCoreFleshInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#c40000"
    - state: anomaly-payload
      color: "#c40000"
  - type: EntitySpawnInRangeOnTrigger
    entries:
    - settings:
        minAmount: 1
        maxAmount: 2
        minRange: 1.5
        maxRange: 2.5
      spawns:
      - FleshBlocker
    - settings:
        minAmount: 2
        maxAmount: 2
        minRange: 3
        maxRange: 4.5
      spawns:
      - MobFleshJared
      - MobFleshGolem
      - MobFleshClamp
      - MobFleshLover
    - settings:
        minAmount: 2
        maxAmount: 6
        minRange: 3
        maxRange: 5
      spawns:
      - RandomFoodSingle
      - RandomFoodMeal
  - type: UseDelay
    delay: 120

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadBluespace
  suffix: Bluespace
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCoreBluespaceInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#003ec4"
    - state: anomaly-payload
      color: "#003ec4"
  - type: BluespaceTeleportOnTrigger
  - type: UseDelay
    delay: 120

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadPresent
  suffix: Santa
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCoreSantaInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#c4006c"
    - state: anomaly-payload
      color: "#c4006c"
  - type: EntitySpawnInRangeOnTrigger
    entries:
    - settings:
        minAmount: 1
        maxAmount: 4
        maxRange: 5
      spawns:
      - PresentRandomUnsafe
      - PresentRandom
      - PresentRandomCoal
      - PresentRandomCash
      - ClothingHeadHatSantahat
      - FoodCakeChristmasSlice
    - settings:
        minAmount: 1
        maxAmount: 2
        maxRange: 6
      spawns:
      - PresentRandomInsane
  - type: UseDelay
    delay: 200

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadIce
  suffix: Ice
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCoreIceInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#83fff5"
    - state: anomaly-payload
      color: "#83fff5"
  - type: ProduceGasOnTrigger # Somewhere 150 spesos per minute
    gases:
      Frezon: 75
    temp: 283
  - type: UseDelay
    delay: 30

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadPyro
  suffix: Pyroclastic
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCorePyroclasticInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#df6705"
    - state: anomaly-payload
      color: "#df6705"
  - type: ProduceGasOnTrigger
    gases:
      Tritium: 50
    temp: 293.15
  - type: UseDelay
    delay: 120

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadChemical
  suffix: Liquid
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCoreLiquidInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#00e4d8"
    - state: anomaly-payload
      color: "#00e4d8"
  - type: EntitySpawnInRangeOnTrigger
    entries:
    - settings:
        minAmount: 2
        maxAmount: 4
        maxRange: 5
      spawns:
      - JugCarbon
      - JugIodine
      - JugFluorine
      - JugChlorine
      - JugAluminium
      - JugPhosphorus
      - JugSulfur
      - JugSilicon
      - JugHydrogen
      - JugLithium
      - JugSodium
      - JugPotassium
      - JugRadium
      - JugIron
      - JugCopper
      - JugGold
      - JugMercury
      - JugSilver
      - JugEthanol
      - JugSugar
      - JugNitrogen
      - JugOxygen
      - JugPlantBGone
      - JugWeldingFuel
    - settings:
        minAmount: 1
        maxAmount: 3
        maxRange: 4
      spawns:
      - ReagentSlimeSpawner
  - type: UseDelay
    delay: 220 # OH SHIT CURSE OF SS220

- type: entity
  parent: BaseAnomalyPayload
  id: AnomalyPayloadTech
  suffix: Tech
  components:
  - type: ContainerFill
    containers:
      anomaly-core:
      - AnomalyCoreTechInert
  - type: Sprite
    sprite: _CorvaxGoob/Objects/Devices/anomaly_payload.rsi
    layers:
    - state: anomaly-payload-empty
    - state: anomaly-light
      color: "#0004ff"
    - state: anomaly-payload
      color: "#0004ff"
  - type: EntitySpawnInRangeOnTrigger
    entries:
    - settings:
        minAmount: 2
        maxAmount: 4
        maxRange: 4
      spawns:
      - ResearchDisk
      - ResearchDisk
      - ResearchDisk
      - ResearchDisk5000
      - ResearchDisk5000
      - ResearchDisk10000
      - TechnologyDisk
      - TechnologyDiskRare
      - RandomBoard
      - RandomArtifactSpawner
      - LootSpawnerContrabandLow
    - settings:
        minAmount: 1
        maxAmount: 3
        maxRange: 4
      spawns:
      - SpawnMobAdultSlimesBlueAngry
      - SpawnMobAdultSlimesGreenAngry
      - SpawnMobAdultSlimesYellowAngry
      - SpawnMobBee
      - ReagentSlime
      - CMMobXenoDroneSentient
      - WeaponTurretXeno
      - CMMobXenoRavagerSentient
      - MobButterfly
      - MobBasilisk
  - type: UseDelay
    delay: 120
